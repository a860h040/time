<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Three-Up Viewer</title>
<style>
  :root { --w1: 33.33%; --w2: 33.33%; }
  * { box-sizing: border-box; }
  html, body { height:100%; margin:0; }
  body { font-family: system-ui, Arial, sans-serif; background:#0b0b0c; color:#eaeaea; }
  .toolbar {
    display:flex; gap:.5rem; align-items:center; padding:.5rem .75rem; border-bottom:1px solid #222;
    background:#111; position:sticky; top:0; z-index:2; flex-wrap:wrap;
  }
  .toolbar button {
    border:1px solid #2b2b2b; background:#1a1a1a; color:#ddd; padding:.4rem .6rem; border-radius:.5rem; cursor:pointer;
  }
  .toolbar button:active { transform: translateY(1px); }
  .spacer { flex:1; }

  .wrap {
    position:relative; height: calc(100vh - 52px);
    display:grid;
    grid-template-columns: var(--w1) 8px var(--w2) 8px calc(100% - var(--w1) - var(--w2) - 16px);
  }
  .pane { height:100%; width:100%; border:none; background:#000; }
  .divider {
    background:#222; position:relative; cursor:col-resize; width:8px; height:100%;
  }
  .divider::after { content:""; position:absolute; inset:0 2px; border-left:2px solid #2f2f2f; border-right:2px solid #2f2f2f; opacity:.7; }

  /* Mobile: stack three panes vertically with draggable row dividers */
  @media (max-width: 800px) {
    .wrap {
      grid-template-columns: 100%;
      grid-template-rows: var(--w1) 8px var(--w2) 8px calc(100% - var(--w1) - var(--w2) - 16px);
    }
    .divider { cursor:row-resize; width:100%; height:8px; }
  }
</style>
</head>
<body>
  <div class="toolbar">
    <strong>Three-Up Viewer</strong>
    <div class="spacer"></div>
    <button id="equal">Equal Thirds</button>
    <button id="fullLeft">Left Full</button>
    <button id="fullMid">Middle Full</button>
    <button id="fullRight">Right Full</button>
    <button id="reset">Reset</button>
  </div>

  <div class="wrap" id="wrap">
    <!-- Left pane -->
    <iframe class="pane" id="left" src="index1.html" allowfullscreen></iframe>
    <!-- Divider 1 -->
    <div class="divider" id="div1" title="Drag to resize"></div>
    <!-- Middle pane -->
    <iframe class="pane" id="mid" src="index2.html" allowfullscreen></iframe>
    <!-- Divider 2 -->
    <div class="divider" id="div2" title="Drag to resize"></div>
    <!-- Right pane -->
    <iframe class="pane" id="right" src="index3.html" allowfullscreen></iframe>
  </div>

<script>
(function(){
  const root = document.documentElement;
  const wrap = document.getElementById('wrap');
  const div1 = document.getElementById('div1');
  const div2 = document.getElementById('div2');
  const equalBtn = document.getElementById('equal');
  const fullLeftBtn = document.getElementById('fullLeft');
  const fullMidBtn = document.getElementById('fullMid');
  const fullRightBtn = document.getElementById('fullRight');
  const resetBtn = document.getElementById('reset');

  const isMobile = () => window.matchMedia('(max-width:800px)').matches;
  const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

  // Two resizable boundaries: w1 (left size %), w2 (middle size %)
  // Right = 100 - w1 - w2 (minus divider px, handled visually).
  function setW1(pct) {
    const w2 = getW2();
    const maxW1 = 100 - w2 - 10; // keep right ≥10%
    const v = clamp(pct, 10, maxW1);
    root.style.setProperty('--w1', v + '%');
  }
  function setW2(pct) {
    const w1 = getW1();
    const maxW2 = 100 - w1 - 10; // keep right ≥10%
    const v = clamp(pct, 10, maxW2);
    root.style.setProperty('--w2', v + '%');
  }
  function getW1() { return parseFloat(getComputedStyle(root).getPropertyValue('--w1')); }
  function getW2() { return parseFloat(getComputedStyle(root).getPropertyValue('--w2')); }

  let dragging = null; // 'div1' or 'div2'

  function startDrag(which){ dragging = which; }
  function endDrag(){ dragging = null; }

  function onMove(e){
    if(!dragging) return;
    const rect = wrap.getBoundingClientRect();
    if (!isMobile()) {
      const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
      const pct = (x / rect.width) * 100;
      if (dragging === 'div1') {
        // div1 controls boundary between left and middle: set w1
        setW1(pct);
      } else if (dragging === 'div2') {
        // div2 controls boundary between middle and right: set (w1 + w2)
        // Convert absolute position to middle width: w2 = pct - w1
        const w1 = getW1();
        setW2(pct - w1);
      }
    } else {
      const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
      const pct = (y / rect.height) * 100;
      if (dragging === 'div1') setW1(pct);
      else if (dragging === 'div2') {
        const w1 = getW1();
        setW2(pct - w1);
      }
    }
  }

  div1.addEventListener('mousedown', () => startDrag('div1'));
  div2.addEventListener('mousedown', () => startDrag('div2'));
  div1.addEventListener('touchstart', () => startDrag('div1'), {passive:true});
  div2.addEventListener('touchstart', () => startDrag('div2'), {passive:true});
  window.addEventListener('mousemove', onMove);
  window.addEventListener('touchmove', onMove, {passive:false});
  window.addEventListener('mouseup', endDrag);
  window.addEventListener('touchend', endDrag);

  // Controls
  equalBtn.onclick = () => { root.style.setProperty('--w1','33.33%'); root.style.setProperty('--w2','33.33%'); };
  fullLeftBtn.onclick = () => { root.style.setProperty('--w1','100%'); root.style.setProperty('--w2','0%'); };
  fullMidBtn.onclick  = () => { root.style.setProperty('--w1','0%');   root.style.setProperty('--w2','100%'); };
  fullRightBtn.onclick= () => { root.style.setProperty('--w1','0%');   root.style.setProperty('--w2','0%');   };
  resetBtn.onclick    = () => { root.style.setProperty('--w1','33.33%'); root.style.setProperty('--w2','33.33%'); };
})();
</script>
</body>
</html>
